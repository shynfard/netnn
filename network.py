from p4utils.mininetlib.network_API import NetworkAPI

net = NetworkAPI()

# Network general options
net.setLogLevel('info')
net.enableCli()


net.addP4Switch('s0', cli_input='commands_0.txt')
net.setP4Source('s0', 'p4src/s0.p4')

net.addP4Switch('s1_0', cli_input='commands.txt')
net.setP4Source('s1_0', 'p4src/s1_0.p4')
net.addP4Switch('s1_1', cli_input='commands.txt')
net.setP4Source('s1_1', 'p4src/s1_1.p4')
net.addP4Switch('s1_2', cli_input='commands.txt')
net.setP4Source('s1_2', 'p4src/s1_2.p4')
net.addP4Switch('s1_3', cli_input='commands.txt')
net.setP4Source('s1_3', 'p4src/s1_3.p4')

net.addP4Switch('s2_0', cli_input='commands.txt')
net.setP4Source('s2_0', 'p4src/s2_0.p4')
net.addP4Switch('s2_1', cli_input='commands.txt')
net.setP4Source('s2_1', 'p4src/s2_1.p4')
net.addP4Switch('s2_2' ,cli_input='commands.txt')
net.setP4Source('s2_2', 'p4src/s2_2.p4')
net.addP4Switch('s2_3', cli_input='commands.txt')
net.setP4Source('s2_3', 'p4src/s2_3.p4')

net.addP4Switch('s3_0', cli_input='commands.txt')
net.setP4Source('s3_0', 'p4src/s3_0.p4')
net.addP4Switch('s3_1', cli_input='commands.txt')
net.setP4Source('s3_1', 'p4src/s3_1.p4')
net.addP4Switch('s3_2', cli_input='commands.txt')
net.setP4Source('s3_2', 'p4src/s3_2.p4')
net.addP4Switch('s3_3', cli_input='commands.txt')
net.setP4Source('s3_3', 'p4src/s3_3.p4')


net.addP4Switch('s4_0', cli_input='commands.txt')
net.setP4Source('s4_0', 'p4src/s4_0.p4')
net.addP4Switch('s4_1', cli_input='commands.txt')
net.setP4Source('s4_1', 'p4src/s4_1.p4')
net.addP4Switch('s4_2', cli_input='commands.txt')
net.setP4Source('s4_2', 'p4src/s4_2.p4')
net.addP4Switch('s4_3', cli_input='commands.txt')
net.setP4Source('s4_3', 'p4src/s4_3.p4')

net.addP4Switch('s5')
net.setP4Source('s5', 'p4src/s5.p4')

net.addHost('h1')
net.addHost('h2')

net.addLink('h1', 's0')

net.addLink('s0', 's1_0')
net.addLink('s0', 's1_1')
net.addLink('s0', 's1_2')
net.addLink('s0', 's1_3')

net.addLink('s1_0', 's2_0')
net.addLink('s1_0', 's2_1')
net.addLink('s1_0', 's2_2')
net.addLink('s1_0', 's2_3')
net.addLink('s1_1', 's2_0')
net.addLink('s1_1', 's2_1')
net.addLink('s1_1', 's2_2')
net.addLink('s1_1', 's2_3')
net.addLink('s1_2', 's2_0')
net.addLink('s1_2', 's2_1')
net.addLink('s1_2', 's2_2')
net.addLink('s1_2', 's2_3')
net.addLink('s1_3', 's2_0')
net.addLink('s1_3', 's2_1')
net.addLink('s1_3', 's2_2')
net.addLink('s1_3', 's2_3')
net.addLink('s2_0', 's3_0')
net.addLink('s2_0', 's3_1')
net.addLink('s2_0', 's3_2')
net.addLink('s2_0', 's3_3')
net.addLink('s2_1', 's3_0')
net.addLink('s2_1', 's3_1')
net.addLink('s2_1', 's3_2')
net.addLink('s2_1', 's3_3')
net.addLink('s2_2', 's3_0')
net.addLink('s2_2', 's3_1')
net.addLink('s2_2', 's3_2')
net.addLink('s2_2', 's3_3')
net.addLink('s2_3', 's3_0')
net.addLink('s2_3', 's3_1')
net.addLink('s2_3', 's3_2')
net.addLink('s2_3', 's3_3')
net.addLink('s3_0', 's4_0')
net.addLink('s3_0', 's4_1')
net.addLink('s3_0', 's4_2')
net.addLink('s3_0', 's4_3')
net.addLink('s3_1', 's4_0')
net.addLink('s3_1', 's4_1')
net.addLink('s3_1', 's4_2')
net.addLink('s3_1', 's4_3')
net.addLink('s3_2', 's4_0')
net.addLink('s3_2', 's4_1')
net.addLink('s3_2', 's4_2')
net.addLink('s3_2', 's4_3')
net.addLink('s3_3', 's4_0')
net.addLink('s3_3', 's4_1')
net.addLink('s3_3', 's4_2')
net.addLink('s3_3', 's4_3')
net.addLink('s4_0', 's5')
net.addLink('s4_1', 's5')
net.addLink('s4_2', 's5')
net.addLink('s4_3', 's5')
net.addLink('s5', 'h2')

# Assignment strategy
net.mixed()

# Nodes general options
# net.addTaskFile('tasks.txt')
net.enablePcapDumpAll()
net.enableLogAll()

# Start the network
net.startNetwork()